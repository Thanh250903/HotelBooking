@model HotelApp.Models.Hotel.Hotel

@if (TempData["success"] != null)
{
    <h1>@TempData["success"]</h1>
}
@if (TempData["error"] != null)
{
    <h1>@TempData["error"]</h1>
}

<h1 class="text-center my-4">Create a Hotel</h1>
<form method="post" enctype="multipart/form-data" class="container">
    <input type="hidden" asp-for="OwnerId" value="@User.Identity" />
    <div class="border p-4 rounded shadow-sm">
        <!-- Các trường khác -->
        <div class="mb-3 row">
            <label asp-for="HotelName" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="HotelName" class="form-control" />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="Description" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="Description" class="form-control" />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="City" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="City" class="form-control" />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="NumberPhone" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="NumberPhone" class="form-control" />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="AverangeRating" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="AverangeRating" class="form-control" />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="Lattitube" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="Longitude" class="form-control" readonly />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="Longitude" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="Longitude" class="form-control" readonly />
            </div>
        </div>
        <div class="mb-3 row">
            <label asp-for="ImageUrl" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input type="file" name="imageFile" class="form-control" />
            </div>
        </div>
    </div>
    <div id="map" style="height: 400px; width: 100%;"></div>
    <div class="text-center row">
        <div class="col">
            <button type="submit" class="btn btn-primary w-100">Submit</button>
        </div>
        <div class="col">
            <a asp-area="Owner" asp-controller="Hotel" asp-action="Index" class="btn btn-secondary w-100">Back to list</a>
        </div>
        <div class="col">
            <button type="reset" class="btn btn-warning w-100">Reset all</button>
        </div>
    </div>
</form>

@section Scripts {
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyApdnBLqJeVW4c5tlZ32v8BzVBVWyJnYlg"></script>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 16.047079, lng: 108.206230 }, // Đà Nẵng
                zoom: 13
            });

            map.addListener('click', function (event) {
                var lat = event.latLng.lat();
                var lng = event.latLng.lng();
                alert('You clicked the map at latitude: ' + lat + ' and longitude: ' + lng);

                // Đặt giá trị tọa độ vào các trường input
                document.getElementById('Lattitude').value = lat;
                document.getElementById('Longitude').value = lng;

                // Thêm marker vào bản đồ
                new google.maps.Marker({
                    position: { lat: lat, lng: lng },
                    map: map
                });
            });
        }

        window.onload = initMap;
    </script>
}
