@using System.Globalization
@model ICollection<HotelApp.Models.Hotel.VM.RoomVM>

@if (TempData["success"] != null)
{
    <div class="alert alert-success">
        @TempData["success"]
    </div>
}

@if (TempData["error"] != null)
{
    <div class="alert alert-danger">
        @TempData["error"]
    </div>
}

<div class="mb-3">
    <h2>@ViewBag.Hotels.HotelName</h2>
</div>
<div class="mb-3">
    <p>@ViewBag.Hotels.City</p>
</div>
@if (!string.IsNullOrEmpty(@ViewBag.Hotels.ImageUrl))
{
    <div class="mb-3">
        <img src="@ViewBag.Hotels.ImageUrl" alt="Hình ảnh Khách Sạn"
             style="height: 300px; object-fit: cover; cursor: zoom-in;"
             onclick="openModal(this)" />


        <!-- Lightbox Modal -->
        <div id="imageModal" style="display:none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9);">
            <span style="position: absolute; top: 20px; right: 35px; color: white; font-size: 40px; font-weight: bold; cursor: pointer;" onclick="closeModal()">&times;</span>
            <img id="modalImage" style="margin: auto; display: block; width: 100%; height: 100%; object-fit: contain;">
        </div>

        <script>
            function openModal(img) {
                // Zoom in
                var modal = document.getElementById("imageModal");
                var modalImg = document.getElementById("modalImage");
                modal.style.display = "block";
                modalImg.src = img.src;
            }

            function closeModal() {
                // Zoom out
                var modal = document.getElementById("imageModal");
                modal.style.display = "none";
            }
        </script>
    </div>
}
<div class="row pt-4 pb-4">
    <div class="col-6">
        <h2 style="text-transform:uppercase"> List of Room in @ViewBag.Hotels.HotelName</h2>
    </div>
</div>

<div class="container">
    <table class="table table-striped table-hover">
        <thead class="thead-dark">
            <tr>
                <th>Room Number</th>
                <th>Room Type</th>
                <th>Price</th>
                <th>Status</th>
                <th>Bed Count</th>
                <th>Image</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var room in Model)
            {
                <tr>
                    <td>@room.RoomNumber</td>
                    <td>@room.RoomType</td>
                    <td>@room.Price.ToString("C0", new CultureInfo("vi-VN"))</td> 
                    <td>@room.StatusRoom.ToString()</td>
                    <td>@room.BedCount</td>
                    <td>
                        @if (!string.IsNullOrEmpty(room.RoomImgUrl))
                        {
                                <img src="@room.RoomImgUrl" alt="RoomImage" style="height: 200px; object-fit: cover" />
                        }
                        else
                        {
                            <p>
                               Image not availabe
                            </p>
                        }
                    </td>
                    <td>
                        <a asp-area="Owner" asp-controller="Room" asp-action="EditRoom" asp-route-id="@room.RoomId" class="btn btn-primary btn-sm">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                        <a asp-area="Owner" asp-controller="Room" asp-action="DeleteRoom" asp-route-id="@room.RoomId" class="btn btn-danger btn-sm">
                             <i class="fas fa-trash-alt"></i> Delete
                        </a>
                        <a asp-area="Users" asp-controller="Home" asp-action="Index" class="btn btn-secondary btn-sm">
                                <i class="fas fa-undo"></i> Return
                        </a>
                        <a asp-area="Users" asp-controller="Booking" asp-action="BookingRoom" asp-route-id="@room.RoomId" class="btn btn-success btn-sm">
                            <i class="fa fa-check-square"></i>
                            Đặt ngay</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>



@section Scripts {
    @{
        <partial name="_ValidationScriptsPartial" />
    }
}
